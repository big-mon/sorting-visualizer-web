<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sorting Image Comparator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <p class="eyebrow">Image Sort Playground</p>
      <h1>ソートのアルゴリズムを画像で比較するやつ</h1>
      <p class="lead">好きな画像をアップロードしてシャッフル、アルゴリズム別のソートの様子を見比べられます。</p>
      <p class="lead note">画像はブラウザー内でのみ処理され、外部に送信されません。</p>
    </div>
  </header>

  <main class="container">
    <section class="controls" aria-label="コントロール">
      <div class="control-row">
        <div class="control-group">
          <label class="label">画像アップロード</label>
          <input id="fileInput" type="file" accept="image/*" />
        </div>

        <div class="control-group">
          <label class="label">分割モード</label>
          <div class="split-row">
            <div class="segmented">
              <label><input type="radio" name="splitMode" value="stripes" checked /> 縦ストライプ</label>
              <label><input type="radio" name="splitMode" value="tiles" /> タイル</label>
            </div>
            <div class="split-controls">
              <div id="stripesControls" class="sub-controls">
          <label>分割数 <span id="stripeCountLabel">40</span></label>
          <input id="stripeCount" type="range" min="1" max="100" value="40" />
              </div>
              <div id="tilesControls" class="sub-controls hidden">
              <label>列数 <span id="tileColsLabel">8</span> / 行数 <span id="tileRowsLabel">6</span> / 合計 <span id="tileTotalLabel">48</span></label>
              <input id="tileCols" type="range" min="1" max="20" value="8" />
              <input id="tileRows" type="range" min="1" max="20" value="6" />
              </div>
            </div>
          </div>
        </div>

        <div class="control-group">
          <label class="label">Seed</label>
          <div class="seed-row">
            <input id="seedInput" type="number" placeholder="Seed" />
            <button id="seedRandom" class="ghost" type="button">Random</button>
          </div>
        </div>
      </div>

      <div class="control-group">
        <label class="label">Speed / Shuffle</label>
        <label>Steps / second: <span id="speedLabel">60</span></label>
        <div class="speed-row">
          <input id="speedRange" type="range" min="1" max="5000" value="60" />
          <div class="button-row">
            <button id="shuffleBtn" type="button">Shuffle</button>
            <button id="startBtn" type="button">Start</button>
            <button id="resetBtn" class="ghost" type="button">Reset</button>
          </div>
        </div>
      </div>

      <div class="control-group">
        <label class="label">アルゴリズム</label>
        <div class="checkboxes" id="algoList">
          <div class="algo-group">
            <div class="algo-group-header">
              <label class="algo-group-label">
                <input type="checkbox" class="algo-toggle-checkbox" data-group="comparison" checked />
                <span>比較ソート（Comparison sort）</span>
              </label>
            </div>
            <div class="algo-options">
              <label><input type="checkbox" value="bubble" checked /> Bubble</label>
              <label><input type="checkbox" value="insertion" checked /> Insertion</label>
              <label><input type="checkbox" value="selection" checked /> Selection</label>
              <label><input type="checkbox" value="quick" checked /> Quick</label>
              <label><input type="checkbox" value="merge" checked /> Merge</label>
              <label><input type="checkbox" value="heap" checked /> Heap</label>
              <label><input type="checkbox" value="shell" checked /> Shell</label>
              <label><input type="checkbox" value="intro" checked /> Intro</label>
              <label><input type="checkbox" value="tim" checked /> Tim</label>
              <label><input type="checkbox" value="comb" checked /> Comb</label>
              <label><input type="checkbox" value="cocktail" checked /> Cocktail</label>
              <label><input type="checkbox" value="gnome" checked /> Gnome</label>
              <label><input type="checkbox" value="oddEven" checked /> Odd-even</label>
              <label><input type="checkbox" value="bitonic" checked /> Bitonic</label>
              <label><input type="checkbox" value="oddEvenMerge" checked /> Odd-even merge</label>
            </div>
          </div>
          <div class="algo-group">
            <div class="algo-group-header">
              <label class="algo-group-label">
                <input type="checkbox" class="algo-toggle-checkbox" data-group="noncomparison" checked />
                <span>非比較ソート（Non-comparison sort）</span>
              </label>
            </div>
            <div class="algo-options">
              <label><input type="checkbox" value="counting" checked /> Counting</label>
              <label><input type="checkbox" value="radix" checked /> Radix</label>
              <label><input type="checkbox" value="bucket" checked /> Bucket</label>
            </div>
          </div>
          <div class="algo-group">
            <div class="algo-group-header">
              <label class="algo-group-label">
                <input type="checkbox" class="algo-toggle-checkbox" data-group="joke" />
                <span>特殊</span>
              </label>
            </div>
            <div class="algo-options">
              <label><input type="checkbox" value="bogo" /> Bogo</label>
              <label><input type="checkbox" value="stalin" /> Stalin</label>
            </div>
          </div>
        </div>
        <p class="hint" id="bubbleWarning"></p>
      </div>
    </section>

    <section class="panels" id="panelGrid" aria-live="polite"></section>

    <section class="algo-notes" aria-label="アルゴリズムの説明">
      <h2>アルゴリズムの簡単な説明</h2>
      <div class="algo-category">
        <h3>比較ソート（Comparison sort）</h3>
        <div class="algo-list">
          <article>
            <h3>Bubble</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Teaching</span>
            </div>
            <p>1950年代に広まった古典手法。隣接要素を比較して入れ替えを繰り返し、端へ泡のように移動させます。</p>
          </article>
          <article>
            <h3>Insertion</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Nearly-sorted</span>
            </div>
            <p>1950年代から使われてきた定番。整列済み部分に要素を差し込み、局所的に少しずつ並べ替えます。</p>
          </article>
          <article>
            <h3>Selection</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Few swaps</span>
            </div>
            <p>1950年代に登場した古典。未整列部分から最小を選び、先頭へ置く操作を繰り返します。</p>
          </article>
          <article>
            <h3>Quick</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Avg O(n log n)</span>
              <span class="badge">特性: Cache-friendly</span>
            </div>
            <p>1960年代にHoareが提案。ピボットで分割し、左右を再帰的に整列する高速な分割統治法です。</p>
          </article>
          <article>
            <h3>Merge</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Worst O(n log n)</span>
              <span class="badge">特性: External sort</span>
            </div>
            <p>1945年ごろに提案。配列を分割して整列し、安定なマージで戻す分割統治法です。</p>
          </article>
          <article>
            <h3>Heap</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Worst O(n log n)</span>
              <span class="badge">特性: In-place</span>
            </div>
            <p>1964年にWilliamsが提案。ヒープ構造で最大/最小を取り出しながら並べ替えます。</p>
          </article>
          <article>
            <h3>Shell</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Gap insertion</span>
            </div>
            <p>1959年にShellが提案。間隔を空けた挿入ソートを繰り返し、最終的に通常挿入へ収束します。</p>
          </article>
          <article>
            <h3>Intro</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Worst O(n log n)</span>
              <span class="badge">特性: Stdlib</span>
            </div>
            <p>1997年にMusserが提案。クイックの平均性能を使いつつ、深さが増えるとヒープに切替えます。</p>
          </article>
          <article>
            <h3>Tim</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Worst O(n log n)</span>
              <span class="badge">特性: Stdlib</span>
            </div>
            <p>2002年にPetersが提案。局所的な並び（ラン）を見つけて挿入・マージで統合する実用型です。</p>
          </article>
          <article>
            <h3>Comb</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Bubble gap</span>
            </div>
            <p>1991年にDoboxらが提案。比較間隔を広げたバブル改良で、ギャップを縮めながら整列します。</p>
          </article>
          <article>
            <h3>Cocktail</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Bidirectional</span>
            </div>
            <p>1980年代に知られた手法。前後に往復しながらバブル操作を行い、両端を詰めていきます。</p>
          </article>
          <article>
            <h3>Gnome</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Simple</span>
            </div>
            <p>2000年代に名称が広まりました。逆順を見つけたら一歩戻る操作で局所的に整列します。</p>
          </article>
          <article>
            <h3>Odd-even</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n^2)</span>
              <span class="badge">特性: Parallel</span>
            </div>
            <p>1970年代から知られる方法。奇数・偶数インデックスのペアを交互に比較し、並列化に向きます。</p>
          </article>
          <article>
            <h3>Bitonic</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: O(n log^2 n)</span>
              <span class="badge">特性: Parallel</span>
            </div>
            <p>1968年にBatcherが提案。ビトニック列を作って比較ネットワークで整列します。</p>
          </article>
          <article>
            <h3>Odd-even merge</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: O(n log^2 n)</span>
              <span class="badge">特性: Parallel</span>
            </div>
            <p>1968年にBatcherが提案。奇偶マージネットワークで規則的に比較し、並列実装に向きます。</p>
          </article>
        </div>
      </div>
      <div class="algo-category">
        <h3>非比較ソート（Non-comparison sort）</h3>
        <div class="algo-list">
          <article>
            <h3>Counting</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: O(n+k)</span>
              <span class="badge">特性: Range-limited</span>
            </div>
            <p>1950年代に普及。値の出現回数を数えて位置を決める非比較型で、範囲が狭いと高速です。</p>
          </article>
          <article>
            <h3>Radix</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: O(d(n+k))</span>
              <span class="badge">特性: Integer keys</span>
            </div>
            <p>19世紀末から概念があり、1950年代に実用化。桁ごとに安定ソートを繰り返します。</p>
          </article>
          <article>
            <h3>Bucket</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Stable</span>
              <span class="badge">計算量: Avg O(n+k)</span>
              <span class="badge">特性: Uniform dist</span>
            </div>
            <p>1956年ごろの提案。範囲を区切ってバケツに分配し、各バケツを個別に整列します。</p>
          </article>
        </div>
      </div>
      <div class="algo-category">
        <h3>特殊</h3>
        <div class="algo-list">
          <article>
            <h3>Bogo</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Unstable</span>
              <span class="badge">計算量: Unbounded</span>
              <span class="badge">特性: Joke</span>
            </div>
            <p>1980年代にジョークとして流行。無作為に並べ替え、偶然整列するのを待ちます。</p>
          </article>
          <article>
            <h3>Stalin</h3>
            <div class="algo-badges">
              <span class="badge" data-tip="同じキーの要素の相対順序が保たれるか">安定性: Not a full sort</span>
              <span class="badge">計算量: O(n)</span>
              <span class="badge">特性: Joke</span>
            </div>
            <p>2010年代のジョーク。順序を乱す要素を粛清して捨て、残った列だけが整列済みになります。</p>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Runs fully in your browser. No uploads, no servers.</p>
  </footer>

  <script type="module" src="js/main.js?v=2"></script>
</body>
</html>
