<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sorting Image Comparator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <p class="eyebrow">Image Sort Playground</p>
      <h1>ソートのアルゴリズムを画像で比較体験</h1>
      <p class="lead">好きな画像をアップロードしてシャッフル、アルゴリズム別のソートの様子を見比べられます。</p>
      <p class="lead note">画像はブラウザー内でのみ処理され、外部に送信されません。</p>
    </div>
  </header>

  <main class="container">
    <section class="controls" aria-label="コントロール">
      <div class="control-row">
        <div class="control-group">
          <label class="label">画像アップロード</label>
          <input id="fileInput" type="file" accept="image/*" />
        </div>

        <div class="control-group">
          <label class="label">分割モード</label>
          <div class="split-row">
            <div class="segmented">
              <label><input type="radio" name="splitMode" value="stripes" checked /> 縦ストライプ</label>
              <label><input type="radio" name="splitMode" value="tiles" /> タイル</label>
            </div>
            <div class="split-controls">
              <div id="stripesControls" class="sub-controls">
          <label>分割数 <span id="stripeCountLabel">40</span></label>
          <input id="stripeCount" type="range" min="1" max="100" value="40" />
              </div>
              <div id="tilesControls" class="sub-controls hidden">
              <label>列数 <span id="tileColsLabel">8</span> / 行数 <span id="tileRowsLabel">6</span> / 合計 <span id="tileTotalLabel">48</span></label>
              <input id="tileCols" type="range" min="1" max="20" value="8" />
              <input id="tileRows" type="range" min="1" max="20" value="6" />
              </div>
            </div>
          </div>
        </div>

        <div class="control-group">
          <label class="label">Seed</label>
          <div class="seed-row">
            <input id="seedInput" type="number" placeholder="Seed" />
            <button id="seedRandom" class="ghost" type="button">Random</button>
          </div>
        </div>
      </div>

      <div class="control-group">
        <label class="label">Speed / Shuffle</label>
        <label>Steps / second: <span id="speedLabel">60</span></label>
        <div class="speed-row">
          <input id="speedRange" type="range" min="1" max="5000" value="60" />
          <div class="button-row">
            <button id="shuffleBtn" type="button">Shuffle</button>
            <button id="startBtn" type="button">Start</button>
            <button id="resetBtn" class="ghost" type="button">Reset</button>
          </div>
        </div>
      </div>

      <div class="control-group">
        <label class="label">アルゴリズム</label>
        <div class="checkboxes" id="algoList">
          <div class="algo-group">
            <h4>比較ソート（Comparison sort）</h4>
            <div class="algo-options">
              <label><input type="checkbox" value="bubble" checked /> Bubble</label>
              <label><input type="checkbox" value="insertion" checked /> Insertion</label>
              <label><input type="checkbox" value="selection" checked /> Selection</label>
              <label><input type="checkbox" value="quick" checked /> Quick</label>
              <label><input type="checkbox" value="merge" checked /> Merge</label>
              <label><input type="checkbox" value="heap" /> Heap</label>
              <label><input type="checkbox" value="shell" /> Shell</label>
              <label><input type="checkbox" value="intro" /> Intro</label>
              <label><input type="checkbox" value="tim" /> Tim</label>
              <label><input type="checkbox" value="comb" /> Comb</label>
              <label><input type="checkbox" value="cocktail" /> Cocktail</label>
              <label><input type="checkbox" value="gnome" /> Gnome</label>
              <label><input type="checkbox" value="oddEven" /> Odd-even</label>
              <label><input type="checkbox" value="bitonic" /> Bitonic</label>
              <label><input type="checkbox" value="oddEvenMerge" /> Odd-even merge</label>
            </div>
          </div>
          <div class="algo-group">
            <h4>非比較ソート（Non-comparison sort）</h4>
            <div class="algo-options">
              <label><input type="checkbox" value="counting" /> Counting</label>
              <label><input type="checkbox" value="radix" /> Radix</label>
              <label><input type="checkbox" value="bucket" /> Bucket</label>
            </div>
          </div>
          <div class="algo-group">
            <h4>特殊</h4>
            <div class="algo-options">
              <label><input type="checkbox" value="bogo" /> Bogo</label>
            </div>
          </div>
        </div>
        <p class="hint" id="bubbleWarning"></p>
      </div>
    </section>

    <section class="panels" id="panelGrid" aria-live="polite"></section>

    <section class="algo-notes" aria-label="アルゴリズムの説明">
      <h2>アルゴリズムの簡単な説明</h2>
      <div class="algo-category">
        <h3>比較ソート（Comparison sort）</h3>
        <div class="algo-list">
          <article>
            <h3>Bubble</h3>
            <p>隣り合う要素を比べて入れ替える、分かりやすい基本型。1950年代に広まったとされる古典的な方法で、大きい数だと遅くなりやすいです。</p>
          </article>
          <article>
            <h3>Insertion</h3>
            <p>カードを手札に差し込むように、順番に正しい位置へ挿入していきます。1950年代から使われてきた定番で、小さい数に向きます。</p>
          </article>
          <article>
            <h3>Selection</h3>
            <p>一番小さいものを見つけて先頭に置く、を繰り返します。1950年代に登場した古典的な手法で、動きは分かりやすいです。</p>
          </article>
          <article>
            <h3>Quick</h3>
            <p>基準（ピボット）で左右に分けながら整列する高速型。1960年代初頭にHoareが提案し、平均的にはとても速いです。</p>
          </article>
          <article>
            <h3>Merge</h3>
            <p>細かく分けてから、順番にマージして戻す安定型。1940年代に提案された古典で、比較的安定して速いです。</p>
          </article>
          <article>
            <h3>Heap</h3>
            <p>木構造のルールを使って最大/最小を取り出す方法。1960年代に登場し、安定して速めです。</p>
          </article>
          <article>
            <h3>Shell</h3>
            <p>一定間隔で挿入ソートを繰り返し、徐々に間隔を狭める方法。1950年代に提案された改良型です。</p>
          </article>
          <article>
            <h3>Intro</h3>
            <p>クイックの速さとヒープの最悪保証を合わせたハイブリッド。深さが深いとヒープに切り替えます。</p>
          </article>
          <article>
            <h3>Tim</h3>
            <p>小さな区間は挿入、全体はマージでまとめる実用型。実際の標準ライブラリにも使われることが多いです。</p>
          </article>
          <article>
            <h3>Comb</h3>
            <p>バブルソートの間隔を広げた改良版。櫛の歯のように比較して徐々に詰めていきます。</p>
          </article>
          <article>
            <h3>Cocktail</h3>
            <p>左右に行き来しながらバブルする双方向版。端の要素を効率良く動かせます。</p>
          </article>
          <article>
            <h3>Gnome</h3>
            <p>逆順に出会ったら一歩戻る、を繰り返すシンプルな方法。動きが直感的です。</p>
          </article>
          <article>
            <h3>Odd-even</h3>
            <p>奇数ペアと偶数ペアを交互に比較する方法。並列化しやすい特徴があります。</p>
          </article>
          <article>
            <h3>Bitonic</h3>
            <p>ビトニック列を作って整列するソーティングネットワーク。ハードウェア向けにも使われます。</p>
          </article>
          <article>
            <h3>Odd-even merge</h3>
            <p>Batcherの奇偶マージネットワークを使う手法。比較回数が規則的です。</p>
          </article>
        </div>
      </div>
      <div class="algo-category">
        <h3>非比較ソート（Non-comparison sort）</h3>
        <div class="algo-list">
          <article>
            <h3>Counting</h3>
            <p>値の出現回数を数えて位置を決める非比較型。範囲が狭いととても速いです。</p>
          </article>
          <article>
            <h3>Radix</h3>
            <p>桁ごとに安定ソートを繰り返す非比較型。整数に強く、大きな配列でも安定します。</p>
          </article>
          <article>
            <h3>Bucket</h3>
            <p>値の範囲をいくつかのバケツに分け、各バケツを整列します。分布が均一なときに有利です。</p>
          </article>
        </div>
      </div>
      <div class="algo-category">
        <h3>特殊</h3>
        <div class="algo-list">
          <article>
            <h3>Bogo</h3>
            <p>無作為に並べ替えて偶然揃うのを待つネタ枠。小さな配列でのみ現実的です。</p>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Runs fully in your browser. No uploads, no servers.</p>
  </footer>

  <script type="module" src="js/main.js?v=2"></script>
</body>
</html>
